{% extends 'base.html' %} {% load static %} {% block navbar %}
<div class="nav-logo align-self-center">
    <a class="navbar-brand" href="{% url 'index' %}"><img alt="logo" src="{% static 'assets/img/favicon-96x96.png' %}" /> <span class="navbar-brand-name">Tech_Blog</span></a>
</div>

<ul class="navbar-item topbar-navigation">
    <!--  BEGIN TOPBAR  -->
    <div class="topbar-nav header navbar" role="banner">
        <nav id="topbar">
            <ul class="list-unstyled menu-categories" id="topAccordion">
                <li class="menu single-menu active">
                    <a href="{% url 'postlist' %}" aria-expanded="false" class="dropdown-toggle autodroprown">
                        <div class="">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="24"
                                height="24"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="feather feather-home"
                            >
                                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                                <polyline points="9 22 9 12 15 12 15 22"></polyline>
                            </svg>

                            <span>My Blog</span>
                        </div>
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="feather feather-chevron-down"
                        >
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </a>
                </li>

                <li class="menu single-menu">
                    <a href="#app" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
                        <div class="">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="24"
                                height="24"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="feather feather-coffee"
                            >
                                <path d="M18 8h1a4 4 0 0 1 0 8h-1"></path>
                                <path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path>
                                <line x1="6" y1="1" x2="6" y2="4"></line>
                                <line x1="10" y1="1" x2="10" y2="4"></line>
                                <line x1="14" y1="1" x2="14" y2="4"></line>
                            </svg>
                            <span>Subscribe</span>
                        </div>
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="feather feather-chevron-down"
                        >
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </a>
                </li>

                <li class="menu single-menu">
                    <a href="#components" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
                        <div class="">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="24"
                                height="24"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="feather feather-message-square"
                            >
                                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                            </svg>

                            <span>Dev Square</span>
                        </div>
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="feather feather-chevron-down"
                        >
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
    <!--  END TOPBAR  -->
</ul>

<ul class="navbar-item flex-row ml-auto">
    <li class="nav-item align-self-center search-animated">
        <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="feather feather-search toggle-search"
        >
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
        <form class="form-inline search-full form-inline search" role="search">
            <div class="search-bar">
                <input type="text" class="form-control search-form-control ml-lg-auto" placeholder="Search..." />
            </div>
        </form>
    </li>
</ul>

<ul class="navbar-item flex-row nav-dropdowns">
    <li class="nav-item dropdown user-profile-dropdown order-lg-0 order-1">
        <a href="javascript:void(0);" class="nav-link dropdown-toggle user" id="user-profile-dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <div class="media">
                <img src="{% static 'assets/img/90x90.jpg' %}" class="img-fluid" alt="admin-profile" />
            </div>
        </a>
        <div class="dropdown-menu position-absolute" aria-labelledby="userProfileDropdown">
            <div class="user-profile-section">
                <div class="media mx-auto">
                    <div class="media-body">
                        <h5>Shaun Park</h5>
                        <p>Project Leader</p>
                    </div>
                </div>
            </div>
            <div class="dropdown-item">
                <a href="user_profile.html">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="feather feather-user"
                    >
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    <span>Profile</span>
                </a>
            </div>
            <div class="dropdown-item">
                <a href="auth_login.html">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="feather feather-log-out"
                    >
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                        <polyline points="16 17 21 12 16 7"></polyline>
                        <line x1="21" y1="12" x2="9" y2="12"></line>
                    </svg>
                    <span>Log Out</span>
                </a>
            </div>
        </div>
    </li>
</ul>
{% endblock %}
{% block content %}
<div class="page-header">
    <nav class="breadcrumb-one" aria-label="breadcrumb">
        <div class="title">
            <h3>My Blog</h3>
        </div>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="javascript:void(0);">write</a></li>
        </ol>
    </nav>
</div>

<div class="row layout-top-spacing">
    <div class="col-xl-12 col-lg-12 col-md-12">
        <div class="row">
            <div class="col-xl-12 col-md-12">
                <div class="mail-box-container">
                    <div class="mail-overlay"></div>

                    <div id="mailbox-inbox" class="accordion mailbox-inbox">
                        <!-- My Blog 게시글 리스트 BEGIN -->

                        <div class="modal-content" style="height: 100%;">
                            <div class="modal-body" style="height: 43.5rem">
                                <div class="compose-box">
                                    <div class="compose-content">
                                        <form style="height: 100%" enctype="multipart/form-data" class="postform" method="post">
                                            {% csrf_token %}
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="d-flex justify-content-between mb-2 mail-form">
                                                        <p>카테고리</p>
                                                        <div class="col-md-11">
                                                            <select class="m-0" id="" placeholder="카테고리를 선택하세요." name="category">
                                                                {% for category in categories %}
                                                                {% if category == post.catery %}
                                                                <option value="{{ category }}" selected>{{ category }}</option>
                                                                {% else %}
                                                                <option value="{{ category }}">{{ category }}</option>
                                                                {% endif %}
                                                                {% endfor %}
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="d-flex justify-content-between mail-form border-bottom">
                                                        <div class="col-md-12">
                                                            <svg
                                                                xmlns="http://www.w3.org/2000/svg"
                                                                width="24"
                                                                height="24"
                                                                viewBox="0 0 24 24"
                                                                fill="none"
                                                                stroke="currentColor"
                                                                stroke-width="2"
                                                                stroke-linecap="round"
                                                                stroke-linejoin="round"
                                                                class="feather feather-menu mail-menu d-lg-none">
                                                                <line x1="3" y1="12" x2="21" y2="12"></line>
                                                                <line x1="3" y1="6" x2="21" y2="6"></line>
                                                                <line x1="3" y1="18" x2="21" y2="18"></line>
                                                            </svg>
                                                            {% if post %}
                                                            <input type="text" class="form-control input-search border-0" placeholder="{{ post.title }}" name="title"/>
                                                            {% else %}
                                                            <input type="text" class="form-control input-search border-0" placeholder="제목을 입력하세요." name="title"/>
                                                            {% endif %}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <textarea name="post-content" id="post-content" style="display:none;"></textarea>
                                            <div id="editor-container" class="ql-container ql-snow" style="height: 30rem;"></div>
                                            <div class="d-flex border-top border-light-subtle justify-content-between mt-4">
                                                <div class="d-flex">
                                                    <input type="file" class="form-control-file mt-2" id="mail_File_attachment" multiple="multiple" placeholder="첨부 파일" name="upload_file"/>
                                                </div>
                                                <button id="btn-save" class="btn float-left mt-2" type="submit">Save</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- My Blog 게시글 리스트 END -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block script %}
<script>
    var quill = new Quill("#editor-container", {
        modules: {
            toolbar: [
                [{ header: [1, 2, false] }], 
                ["bold", "italic", "underline"], 
                ["image", "code-block"]
            ],
        },
        placeholder: "내용을 입력하세요.",
        theme: "snow", // or 'bubble',
    });

    document.querySelector('.postform').addEventListener('submit', function() {
        q = document.querySelector("#editor-container > .ql-editor");
        console.log(q.innerHTML);
        content = document.querySelector("#post-content");
        console.log(content);
        content.value = q.innerHTML;
    });

    {% if post %}
    console.log('in');
    qu = document.querySelector("#editor-container > .ql-editor");
    qu.innerHTML = '{{ post.content|safe }}';
    {% endif %}

</script>
{% endblock %}
