{% extends 'base.html' %}
{% load static %}
{% block navbar %}
<div class="nav-logo align-self-center">
    <a class="navbar-brand" href="{% url 'index' %}"><img alt="logo" src="{% static 'assets/img/favicon-96x96.png' %}"> <span class="navbar-brand-name">Tech_Blog</span></a>
</div>

<ul class="navbar-item topbar-navigation">
    
    <!--  BEGIN TOPBAR  -->
    <div class="topbar-nav header navbar" role="banner">
        <nav id="topbar">

            <ul class="list-unstyled menu-categories" id="topAccordion">

                <li class="menu single-menu active">
                    <a href="{% url 'postlist' %}" aria-expanded="false" class="dropdown-toggle autodroprown">
                        <div class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                            
                            <span>My Blog</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
                    </a>
                </li>

                <li class="menu single-menu">
                    <a href="#app" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
                        <div class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-coffee">
                            <path d="M18 8h1a4 4 0 0 1 0 8h-1"></path>
                            <path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path>
                            <line x1="6" y1="1" x2="6" y2="4"></line>
                            <line x1="10" y1="1" x2="10" y2="4"></line>
                            <line x1="14" y1="1" x2="14" y2="4"></line>
                            </svg>
                            <span>Subscribe</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
                    </a>
                </li>
                
                <li class="menu single-menu">
                    <a href="#components" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
                        <div class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-message-square"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
                            
                            <span>Dev Square</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
    <!--  END TOPBAR  -->

</ul>

<ul class="navbar-item flex-row ml-auto">
    <li class="nav-item align-self-center search-animated">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search toggle-search"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
        <form class="form-inline search-full form-inline search" role="search">
            <div class="search-bar">
                <input type="text" class="form-control search-form-control  ml-lg-auto" placeholder="Search...">
            </div>
        </form>
    </li>
</ul>

<ul class="navbar-item flex-row nav-dropdowns">

    <li class="nav-item dropdown user-profile-dropdown order-lg-0 order-1">
        <a href="javascript:void(0);" class="nav-link dropdown-toggle user" id="user-profile-dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <div class="media">
                <img src="{% static 'assets/img/90x90.jpg' %}" class="img-fluid" alt="admin-profile">
            </div>
        </a>
        <div class="dropdown-menu position-absolute" aria-labelledby="userProfileDropdown">
            <div class="user-profile-section">
                <div class="media mx-auto">
                    <div class="media-body">
                        <h5>Shaun Park</h5>
                        <p>Project Leader</p>
                    </div>
                </div>
            </div>
            <div class="dropdown-item">
                <a href="user_profile.html">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg> <span>Profile</span>
                </a>
            </div>
            <div class="dropdown-item">
                <a href="auth_login.html">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-log-out"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg> <span>Log Out</span>
                </a>
            </div>
        </div>

    </li>
</ul>
{% endblock %}
{% block content %}
<div class="page-header">
    <nav class="breadcrumb-one" aria-label="breadcrumb">
        <div class="title">
            <h3>My Blog</h3>
        </div>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="javascript:void(0);">Detail</a></li>
        </ol>
    </nav>
</div>

<div class="row layout-top-spacing">
    <div class="col-xl-12 col-lg-12 col-md-12">

        <div class="row">

            <div class="col-xl-12  col-md-12">

                <div class="mail-box-container">
                    <div class="mail-overlay"></div>

                    <div class="tab-title">
                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-12 text-center mail-btn-container">
                                <a id="btn-compose-mail" class="btn btn-block" href="{% url 'postlist' %}"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left close-message"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg></a>
                            </div>
                        </div>
                        {% if user.is_authenticated and post.author == user %}
                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-12 mt-4 text-center mail-btn-container">
                                <a id="btn-compose-mail" class="btn btn-block" href="{% url 'postedit' post.pk %}"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg></a>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-12 mt-4 text-center mail-btn-container">
                                <form action="/blog/delete/{{post.pk}}/" method="post">
                                    {% csrf_token %}
                                    <button id="btn-compose-mail" class="btn btn-block" type="submit"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg></button>
                                </form>
                            </div>
                        </div>
                        {% endif %}
                    </div>
                    <div id="mailbox-inbox" class="accordion mailbox-inbox">
                        <div class="message-box">
                            <div class="message-box-scroll" id="ct">
                                <!-- My Blog 게시글 BEGIN -->
                                <div class="mail-content-container mailInbox" data-mailfrom="info@mail.com" data-mailto="linda@mail.com" data-mailcc="">
        
                                    <div class="d-flex justify-content-between">
        
                                        <div class="d-flex user-info">
                                            {% if post.author.profile_image %}
                                            <div class="f-head">
                                                <img src="{{ post.author.profile_image.url }}" class="user-profile" alt="avatar">
                                            </div>
                                            {% else %}
                                            <div class="f-head">
                                                <img src="{% static 'assets/img/90x90.jpg' %}" class="user-profile" alt="avatar">
                                            </div>
                                            {% endif %}
                                            <div class="f-body">
                                                <div class="meta-title-tag">
                                                    <h4 class="mail-usr-name" data-mailtitle="Promotion Page">제목: {{ post.title }}</h4>
                                                </div>
                                                <div class="meta-mail-time">
                                                    <p class="user-email">작성자: {{ post.author.nickname }}</p>
                                                </div>
                                                <div class="meta-mail-time">
                                                    <p class="meta-time align-self-center">최종 수정일: {{ post.updated_at }}</p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="meta-info">
                                            <div class="meta-action">
                                                <div class="meta-view">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-eye"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg> {{ post.view_count }}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
        
                                    <p class="mail-content" data-mailTitle="Promotion Page">{{ post.content|safe }}</p>
        
                                    <div class="attachments">
                                        <h6 class="attachments-section-title">첨부 파일</h6>
                                        {% if post.upload_file %}
                                        <div class="attachment file-pdf">
                                            <a href="{{ post.upload_file.url }}" download>
                                                <div class="media">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                                                    <div class="media-body">
                                                        <p class="file-name">{{ post.get_file_name }}</p>
                                                    </div>
                                                </div>
                                            </a>
                                        </div>
                                        {% endif %}
        
                                        {% if images %}
                                        {% for image in images %}
                                        <div class="attachment file-folder">
                                            <a href="{{ image.image.url }}" download>
                                                <div class="media">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-image"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
                                                    <div class="media-body">
                                                        <p class="file-name">{{ image.get_file_name }}</p>
                                                    </div>
                                                </div>
                                            </a>
                                        </div>
                                        {% endfor %}
                                        {% endif %}
        
                                    </div>
                                    {% for item in comment_list %}
                                    <p>{{ item }}</p>
                                    {% endfor %}
                                </div>
                                <!-- My Blog 게시글 END -->
                                
                            </div>
                        </div>
                    </div>
                    
                </div>

                <!-- Modal -->

            </div>


        </div>

    </div>
</div>
{% endblock %}

{% block script %}
<script>
    // content = document.querySelector(".mail-content");
    // console.log("{{ post.content|escape }}");
    // content.innerHTML = "{{ post.content|escape }}";
</script>
{% endblock %}